"use strict";(self.webpackChunkDealerPortal=self.webpackChunkDealerPortal||[]).push([[832],{5337:(S,P,p)=>{p.d(P,{D:()=>c});var m=p(9848),s=p(4438),k=p(2168),e=p(4912);let c=(()=>{class u{constructor(g){this.route=g}ngOnInit(){this.route.data.subscribe(g=>{this.pageMeta=g})}static{this.\u0275fac=function(C){return new(C||u)(s.rXU(k.nX))}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["app-breadcrumb"]],standalone:!0,features:[s.aNF],decls:17,vars:3,consts:[[1,"bg-light-primary","rounded","p-y-30","p-x-24","m-b-30","overflow-hidden"],[1,"row"],[1,"col-sm-8"],[1,"page-title","m-0","f-s-20","f-w-600","m-b-16"],[1,"d-flex","align-items-center","overflow-hidden"],[1,"breadcrumb"],[1,"breadcrumb-item"],["name","circle-filled",1,"icon-8"],[1,"breadcrumb-item","active"],[1,"col-sm-4","text-right","position-relative"],[1,"breadcrumb-icon"],["src","/assets/images/breadcrumb/ChatBc.png","alt","breadcrumb","width","165"]],template:function(C,y){1&C&&(s.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),s.EFF(4),s.k0s(),s.j41(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a"),s.EFF(9),s.k0s()(),s.j41(10,"li",6),s.nrm(11,"i-tabler",7),s.k0s(),s.j41(12,"li",8),s.EFF(13),s.k0s()()()(),s.j41(14,"div",9)(15,"div",10),s.nrm(16,"img",11),s.k0s()()()()),2&C&&(s.R7$(4),s.JRh(y.pageMeta.title),s.R7$(5),s.JRh(y.pageMeta.parent),s.R7$(4),s.JRh(y.pageMeta.child))},dependencies:[m.G,e.Jc]})}}return u})()},1832:(S,P,p)=>{p.r(P),p.d(P,{AccountRoutes:()=>me});var m=p(9848),s=p(9417),k=p(5337),e=p(4438),c=p(177),u=p(1413),D=p(6977);const g=r=>({"error-input":r});function C(r,l){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const n=e.XpG(3);e.R7$(),e.SpI(" ",n.config.separator," ")}}function y(r,l){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"input",5,0),e.bIt("paste",function(t){e.eBV(n);const o=e.XpG(2);return e.Njj(o.handlePaste(t))})("keyup",function(t){const o=e.eBV(n).index,a=e.XpG(2);return e.Njj(a.onKeyUp(t,o))})("input",function(t){const o=e.eBV(n).index,a=e.XpG(2);return e.Njj(a.onInput(t,o))})("keydown",function(t){const o=e.eBV(n).index,a=e.XpG(2);return e.Njj(a.onKeyDown(t,o))}),e.k0s(),e.DNE(3,C,2,1,"span",6),e.bVm()}if(2&r){const n=l.$implicit,i=l.index,t=l.last,o=e.XpG(2);e.R7$(),e.ZvI("otp-input ",o.config.inputClass,""),e.Y8G("pattern",o.config.allowNumbersOnly?"\\d*":"")("type",o.inputType)("placeholder",(null==o.config?null:o.config.placeholder)||"")("ngStyle",o.config.inputStyles)("formControl",o.otpForm.controls[n])("id",o.getBoxId(i))("ngClass",e.eq3(11,g,(null==o.config?null:o.config.showError)&&(null==o.formCtrl?null:o.formCtrl.invalid)&&((null==o.formCtrl?null:o.formCtrl.dirty)||(null==o.formCtrl?null:o.formCtrl.touched)))),e.R7$(2),e.Y8G("ngIf",o.config.separator&&!t)}}function x(r,l){if(1&r){const n=e.RV6();e.j41(0,"div",2),e.bIt("focusin",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.onFocusIn())})("focusout",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.onFocusOut())}),e.j41(1,"div",3),e.DNE(2,y,4,13,"ng-container",4),e.k0s()()}if(2&r){const n=e.XpG();e.ZvI("ng-otp-input-wrapper wrapper ",n.config.containerClass,""),e.Mz_("id","c_",n.componentKey,""),e.Y8G("ngStyle",n.config.containerStyles),e.R7$(2),e.Y8G("ngForOf",n.controlKeys)}}class _{static ifTab(l){return this.ifKey(l,"Tab")}static ifDelete(l){return this.ifKey(l,"Delete;Del")}static ifBackspace(l){return this.ifKey(l,"Backspace")}static ifRightArrow(l){return this.ifKey(l,"ArrowRight;Right")}static ifLeftArrow(l){return this.ifKey(l,"ArrowLeft;Left")}static ifSpacebar(l){return this.ifKey(l,"Spacebar; ")}static ifKey(l,n){return n.split(";").some(t=>t===l.key)}}class O{static keys(l){return l?Object.keys(l):[]}}let E=(()=>{class r{set disabled(n){this.setDisabledState(n)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}get controlKeys(){return O.keys(this.otpForm?.controls)}constructor(n){this.document=n,this.config={length:4},this.onBlur=new u.B,this.onInputChange=new u.B,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36),this.destroy$=new u.B,this.activeFocusCount=0,this.onChange=()=>{},this.onTouched=()=>{},this._isDisabled=!1}ngOnInit(){this.otpForm=new s.gE({});for(let n=0;n<this.config.length;n++)this.otpForm.addControl(this.getControlName(n),new s.MJ);this.otpForm.valueChanges.pipe((0,D.Q)(this.destroy$)).subscribe(n=>{O.keys(this.otpForm.controls).forEach(i=>{var t=this.otpForm.controls[i].value;t&&t.length>1&&(t.length>=this.config.length?this.setValue(t):this.rebuildValue())})})}setDisabledState(n){this._isDisabled=n,this.otpForm&&(n?this.otpForm.disable({emitEvent:!1}):this.otpForm.enable({emitEvent:!1}))}writeValue(n){this.currentVal=this.hasVal(n)?n:null,this.setValue(this.currentVal)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}onFocusIn(){this.onTouched(),this.activeFocusCount++}onFocusOut(){setTimeout(()=>{this.activeFocusCount--,0===this.activeFocusCount&&(this.onTouched(),this.onBlur.next())},0)}ngAfterViewInit(){if(!this.config.disableAutoFocus){const n=this.document.getElementById(`c_${this.componentKey}`);if(n){const i=n.getElementsByClassName("otp-input")[0];i&&i.focus&&i.focus()}}}getControlName(n){return`ctrl_${n}`}onKeyDown(n,i){const t=this.getBoxId(i-1),o=this.getBoxId(i);return this.getBoxId(i+1),_.ifSpacebar(n)?(n.preventDefault(),!1):_.ifBackspace(n)||_.ifDelete(n)?(n.target.value?this.clearInput(o,i):(this.clearInput(t,i-1),this.setSelected(t)),void this.rebuildValue()):void 0}hasVal(n){return null!=n&&null!=n&&(!n?.trim||""!=n.trim())}onInput(n,i){let t=this.hasVal(this.currentVal)?`${this.currentVal}${n.target.value}`:n.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(t))return n.target.value=null,n.stopPropagation(),n.preventDefault(),void this.clearInput(null,i);if(this.ifValidKeyCode(null,n.target.value)){const o=this.getBoxId(i+1);this.setSelected(o),this.rebuildValue()}else{n.target.value=null;let o=this.getControlName(i);this.otpForm.controls[o]?.setValue(null),this.rebuildValue()}}onKeyUp(n,i){_.ifTab(n)&&(i-=1);const t=this.getBoxId(i+1),o=this.getBoxId(i-1);return _.ifRightArrow(n)?(n.preventDefault(),void this.setSelected(t)):_.ifLeftArrow(n)?(n.preventDefault(),void this.setSelected(o)):void 0}validateNumber(n){return n&&/^[0-9]+$/.test(n)}getBoxId(n){return`otp_${n}_${this.componentKey}`}clearInput(n,i){let t=this.getControlName(i);if(this.otpForm.controls[t]?.setValue(null),n){const o=this.document.getElementById(n);o&&o instanceof HTMLInputElement&&(o.value=null)}}setSelected(n){this.focusTo(n);const i=this.document.getElementById(n);i&&i.setSelectionRange&&setTimeout(()=>{i.setSelectionRange(0,1)},0)}ifValidKeyCode(n,i){const t=i??n.key;return this.config?.allowNumbersOnly?this.validateNumber(t):/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/^[a-zA-Z0-9%*_\-@#$!]$/.test(t)&&1==t.length}focusTo(n){const i=this.document.getElementById(n);i&&i.focus()}setValue(n){if(!this.config.allowNumbersOnly||!isNaN(n)){if(this.otpForm?.reset(),!this.hasVal(n))return void this.rebuildValue();n=n.toString().replace(/\s/g,""),Array.from(n).forEach((i,t)=>{this.otpForm.get(this.getControlName(t))&&this.otpForm.get(this.getControlName(t)).setValue(i)}),this.config.disableAutoFocus||setTimeout(()=>{const i=this.document.getElementById(`c_${this.componentKey}`);var t=n.length<this.config.length?n.length:this.config.length-1;let o=i.getElementsByClassName("otp-input")[t];o&&o.focus&&setTimeout(()=>{o.focus()},1)},0),this.rebuildValue()}}rebuildValue(){let n=null;O.keys(this.otpForm.controls).forEach(i=>{let t=this.otpForm.controls[i].value;if(t){let o=t.length>1,a=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());t=t[0];let f=a?"upper"==this.config.letterCase.toLocaleLowerCase()?t.toUpperCase():t.toLowerCase():t;a&&f==t?a=!1:t=f,null==n?n=t:n+=t,(o||a)&&this.otpForm.controls[i].setValue(t)}}),this.currentVal!=n&&(this.currentVal=n,this.onChange(n),this.formCtrl?.setValue&&this.formCtrl.setValue(n),this.onInputChange.next(n))}handlePaste(n){let i=n.clipboardData||window.clipboardData;if(i)var t=i.getData("Text");n.stopPropagation(),n.preventDefault(),t&&(!this.config.allowNumbersOnly||this.validateNumber(t))&&this.setValue(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(c.qQ))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ng-otp-input"],["ngx-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl",disabled:"disabled"},outputs:{onBlur:"onBlur",onInputChange:"onInputChange"},standalone:!0,features:[e.Jv_([{provide:s.kq,useExisting:(0,e.Rfq)(()=>r),multi:!0}]),e.aNF],decls:1,vars:1,consts:[["inp",""],["tabindex","0",3,"class","id","ngStyle","focusin","focusout",4,"ngIf"],["tabindex","0",3,"focusin","focusout","id","ngStyle"],[1,"n-o-c"],[4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"paste","keyup","input","keydown","pattern","type","placeholder","ngStyle","formControl","id","ngClass"],[4,"ngIf"]],template:function(i,t){1&i&&e.DNE(0,x,3,7,"div",1),2&i&&e.Y8G("ngIf",null==t.otpForm?null:t.otpForm.controls)},dependencies:[s.X1,s.me,s.BC,s.R_,s.l_,c.bT,c.pM,c.B3,c.YU],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]{margin:0 .51rem}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:first-child{margin-left:0}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:last-child{margin-right:0}.n-o-c[_ngcontent-%COMP%]{display:flex;align-items:center}.error-input[_ngcontent-%COMP%]{border-color:red}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]})}}return r})();var R=p(152),T=p(5964),j=p(605),d=p(4006),b=p(3719),V=p(9631),I=p(8834),M=p(9213);function B(r,l){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"input",4),e.mxI("ngModelChange",function(t){e.eBV(n);const o=e.XpG();return e.DH7(o.editedValue,t)||(o.editedValue=t),e.Njj(t)}),e.k0s(),e.bVm()}if(2&r){const n=e.XpG();e.R7$(),e.R50("ngModel",n.editedValue),e.Y8G("placeholder",n.placeholder)}}function $(r,l){if(1&r&&e.nrm(0,"input",5),2&r){const n=e.XpG();e.Y8G("value",n.value)}}let Y=(()=>{class r{constructor(){this.value="",this.placeholder="",this.label="",this.valueChange=new e.bkB,this.editingStarted=new e.bkB,this.isEditing=!1,this.editedValue=""}toggleEdit(){this.disableEdit||(this.isEditing?(this.valueChange.emit(this.editedValue),this.editingStarted.emit(!1)):(this.editedValue=this.value,this.editingStarted.emit(!0)),this.isEditing=!this.isEditing)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-editable-field"]],inputs:{value:"value",disableEdit:"disableEdit",placeholder:"placeholder",label:"label"},outputs:{valueChange:"valueChange",editingStarted:"editingStarted"},standalone:!0,features:[e.aNF],decls:9,vars:6,consts:[["displayMode",""],["appearance","outline","color","primary",1,"w-100"],[4,"ngIf","ngIfElse"],["mat-icon-button","","matSuffix","",3,"click","disabled"],["matInput","",3,"ngModelChange","ngModel","placeholder"],["matInput","","readonly","",3,"value"]],template:function(i,t){if(1&i){const o=e.RV6();e.j41(0,"mat-form-field",1)(1,"mat-label"),e.EFF(2),e.k0s(),e.DNE(3,B,2,2,"ng-container",2)(4,$,1,1,"ng-template",null,0,e.C5r),e.j41(6,"button",3),e.bIt("click",function(){return e.eBV(o),e.Njj(t.toggleEdit())}),e.j41(7,"mat-icon"),e.EFF(8),e.k0s()()()}if(2&i){const o=e.sdS(5);e.R7$(2),e.JRh(t.label),e.R7$(),e.Y8G("ngIf",t.isEditing)("ngIfElse",o),e.R7$(3),e.Y8G("disabled",t.disableEdit),e.BMQ("aria-label","Edit "+t.label),e.R7$(2),e.JRh(t.isEditing?"check":"edit")}},dependencies:[c.MD,c.bT,m.G,b.rl,b.nJ,b.yw,V.fg,I.iY,M.An,s.YN,s.me,s.BC,s.vS]})}}return r})();var v=p(6722),w=p(4798),F=p(9333),h=p(5596);function X(r,l){if(1&r&&e.nrm(0,"ng-otp-input",19),2&r){const n=e.XpG(2);e.Y8G("config",n.config)}}function U(r,l){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"form",12)(2,"label",13),e.EFF(3),e.k0s(),e.j41(4,"div",14),e.DNE(5,X,1,1,"ng-otp-input",15),e.k0s()(),e.j41(6,"div",16)(7,"span",17),e.EFF(8," Didn\u2019t get the code? "),e.j41(9,"a",18),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(!t.isResendDisabled&&t.onResendClick())}),e.EFF(10),e.k0s()()()()}if(2&r){const n=e.XpG();e.R7$(),e.Y8G("formGroup",n.otpForm),e.R7$(2),e.SpI(" Enter your ",n.length,"-digit code "),e.R7$(2),e.Y8G("ngIf",n.isOtpGenerated),e.R7$(4),e.xc7("pointer-events",n.isResendDisabled?"none":"auto"),e.AVh("disabled",n.isResendDisabled),e.BMQ("aria-disabled",n.isResendDisabled),e.R7$(),e.SpI(" Resend ",n.isResendDisabled?"("+n.resendTimer+"s)":""," ")}}let A=(()=>{class r{constructor(n,i,t,o,a){this.dialogRef=n,this.httpService=i,this.logger=t,this.toastify=o,this.data=a,this.isOtpGenerated=!1,this.resendTimer=60,this.isResendDisabled=!0,this.isEditingAadhar=!1,this.timerSubscription=null,this.logger.info("[OtpInputComponent] Component initialized"),this.aadhaar=new s.gE({aadhar:new s.MJ({value:"123456785241",disabled:!0},[s.k0.required,this.aadharValidator()])})}get length(){return this.data?.length??6}get phoneHint(){return this.data?.phoneHint??"******1234"}ngOnInit(){this.logger.info("[OtpInputComponent] ngOnInit called"),this.logger.debug("[OtpInputComponent] OTP length:",this.length),this.logger.debug("[OtpInputComponent] Phone hint:",this.phoneHint),this.aadhaar.patchValue({aadhar:this.data.aadhaar}),this.otpForm=new s.gE({otp:new s.MJ("",[s.k0.required,s.k0.minLength(this.length)])}),this.config={allowNumbersOnly:!0,length:this.length,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputClass:"custom-otp-input",containerClass:"custom-otp-container"},this.otpForm.get("otp")?.valueChanges.pipe((0,R.B)(500),(0,T.p)(n=>n?.length===this.length)).subscribe(n=>{this.logger.info("[OtpInputComponent] OTP entered:",n),this.verifyOtp(n)})}onResendClick(){this.isResendDisabled?this.logger.warn("[OtpInputComponent] Resend button clicked but is disabled"):(this.logger.info("[OtpInputComponent] Resend OTP clicked"),this.generateOtp(),this.otpForm.get("otp")?.setValue(""))}startResendTimer(){this.logger.info("[OtpInputComponent] Starting resend timer"),this.isResendDisabled=!0,this.resendTimer=60,this.timerSubscription?.unsubscribe(),this.timerSubscription=(0,j.Y)(1e3).subscribe(()=>{this.resendTimer--,this.logger.debug("[OtpInputComponent] Resend timer:",this.resendTimer),this.resendTimer<=0&&(this.isResendDisabled=!1,this.logger.info("[OtpInputComponent] Resend timer completed"),this.timerSubscription?.unsubscribe())})}ngOnDestroy(){this.logger.info("[OtpInputComponent] Component destroyed"),this.timerSubscription?.unsubscribe()}generateOtp(){const n={aadhar_number:Number(this.aadhaar.value.aadhar)};this.logger.info("[OtpInputComponent] Generating OTP with payload:",n),this.httpService.generateOtp(n).subscribe(i=>{this.logger.info("[OtpInputComponent] OTP generation response:",i),202===i.status_code&&(this.isOtpGenerated=!0,this.logger.info("[OtpInputComponent] OTP generated successfully"),this.startResendTimer())},i=>{this.isOtpGenerated=!1,this.logger.error("[OtpInputComponent] Error generating OTP:",i),this.toastify.showError("Error in OTP generation")})}verifyOtp(n){const i={otp:Number(n)};this.logger.info("[OtpInputComponent] Verifying OTP with payload:",i),this.httpService.submitOtp(i).subscribe(t=>{this.logger.info("[OtpInputComponent] OTP verification response:",t),202===t.status_code?(this.logger.info("[OtpInputComponent] OTP verified successfully"),this.dialogRef.close(n)):(this.logger.warn("[OtpInputComponent] OTP verification failed with status code:",t.status_code),this.toastify.showError("OTP verification failed"))},t=>{this.logger.error("[OtpInputComponent] Error verifying OTP:",t),this.toastify.showError("Failed to verify OTP")})}aadharValidator(){return n=>{const i=n.value||"",t=i.replace(/-/g,""),o=/^\d{4}-\d{4}-\d{4}$/.test(i),a=12===t.length,f=/^\d+$/.test(t);return!i||o&&a&&f?null:(this.logger.warn("[OtpInputComponent] Invalid Aadhaar format:",i),{invalidAadhar:!0})}}onAadhaarUpdate(n){this.logger.info("[OtpInputComponent] Aadhaar updated:",n),this.aadhaar.get("aadhar")?.setValue(n)}onEditingStateChanged(n){this.isEditingAadhar=n,this.logger.info("[OtpInputComponent] Aadhaar editing state changed:",n?"Editing":"Not Editing")}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(d.CP),e.rXU(v.k),e.rXU(w.g),e.rXU(F.J),e.rXU(d.Vh))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-otp-input"]],standalone:!0,features:[e.aNF],decls:15,vars:5,consts:[[1,"justify-content-center","align-items-center"],[1,"position-relative","w-100","h-100","bg-gredient","justify-content-center"],[1,"d-flex","align-items-center"],[1,"mat-mdc-card","mdc-card","cardWithShadow","boxed-auth"],[1,"mat-mdc-card-content"],[1,"text-center"],[1,"m-t-30"],[1,"f-s-14","m-t-10"],["placeholder","XXXX-XXXX-XXXX",3,"valueChange","editingStarted","label","disableEdit","value"],[2,"display","flex","justify-content","center"],["mat-flat-button","","color","primary","type","submit",1,"m-r-8",3,"click","disabled"],[4,"ngIf"],[1,"m-t-30","p-t-20",3,"formGroup"],[1,"f-s-14","f-w-600","d-block","m-b-12","text-center"],[1,"otp-wrapper","text-center"],["formControlName","otp",3,"config",4,"ngIf"],[1,"text-center","mt-4","resend-wrapper"],[1,"f-s-14","f-w-500"],[1,"text-primary","text-decoration-none","f-w-500",2,"cursor","pointer",3,"click"],["formControlName","otp",3,"config"]],template:function(i,t){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"h3",6),e.EFF(7," Please proceed for KYC Verification. "),e.k0s(),e.j41(8,"p",7),e.EFF(9," Please check and verify your Aadhar below and proceed to OTP authentication. "),e.k0s()(),e.j41(10,"app-editable-field",8),e.bIt("valueChange",function(a){return t.onAadhaarUpdate(a)})("editingStarted",function(a){return t.onEditingStateChanged(a)}),e.k0s(),e.j41(11,"div",9)(12,"button",10),e.bIt("click",function(){return t.generateOtp()}),e.EFF(13," Generate OTP "),e.k0s()(),e.DNE(14,U,11,9,"div",11),e.k0s()()()()()),2&i){let o;e.R7$(10),e.Y8G("label","Aadhaar Number")("disableEdit",t.isOtpGenerated)("value",null==(o=t.aadhaar.get("aadhar"))?null:o.value),e.R7$(2),e.Y8G("disabled",t.isOtpGenerated||t.isEditingAadhar),e.R7$(2),e.Y8G("ngIf",t.isOtpGenerated)}},dependencies:[c.MD,c.bT,m.G,h.RN,h.m2,I.$z,s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,E,Y],styles:[".boxed-auth[_ngcontent-%COMP%]{width:100%;max-width:480px;margin:0 auto}.custom-row.row[_ngcontent-%COMP%]{margin-right:-8px;margin-left:-8px}.otp-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:24px 0;padding:0 16px}.otp-wrapper[_ngcontent-%COMP%]   .custom-otp-container[_ngcontent-%COMP%]{justify-content:center;gap:10px}.otp-wrapper[_ngcontent-%COMP%]   .custom-otp-input[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;border-radius:4px;text-align:center;border:1px solid #ccc}.verify-btn[_ngcontent-%COMP%]{width:100%}.resend-wrapper[_ngcontent-%COMP%]{padding-top:12px}.otp-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:24px}.resend-wrapper[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{color:gray!important;text-decoration:none;cursor:not-allowed}.aadhaar-edit-row[_ngcontent-%COMP%]{display:flex;align-items:center}.aadhaar-edit-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}"]})}}return r})(),K=(()=>{class r{constructor(n,i,t,o,a){this.dialogRef=n,this.httpService=i,this.logger=t,this.toastify=o,this.data=a,this.isOtpGenerated=!1,this.resendTimer=60,this.isResendDisabled=!0,this.timerSubscription=null,this.logger.info("[OtpVerifyComponent] Component initialized")}get length(){return this.data?.length??6}get phoneHint(){return this.data?.phoneHint??"******1234"}ngOnInit(){this.logger.info("[OtpVerifyComponent] ngOnInit called"),this.logger.debug("[OtpVerifyComponent] OTP length:",this.length),this.logger.debug("[OtpVerifyComponent] Phone hint:",this.phoneHint),this.otpForm=new s.gE({otp:new s.MJ("",[s.k0.required,s.k0.minLength(this.length)])}),this.config={allowNumbersOnly:!0,length:this.length,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputClass:"custom-otp-input",containerClass:"custom-otp-container"},this.otpForm.get("otp")?.valueChanges.pipe((0,R.B)(500),(0,T.p)(n=>n?.length===this.length)).subscribe(n=>{this.logger.info("[OtpVerifyComponent] OTP entered:",n),this.verifyOtp(n)}),this.startResendTimer()}onResendClick(){this.isResendDisabled?this.logger.warn("[OtpVerifyComponent] Resend button clicked but is disabled"):(this.logger.info("[OtpVerifyComponent] Resend OTP clicked"),this.startResendTimer(),this.toastify.showSuccess("OTP resent successfully"))}startResendTimer(){this.logger.info("[OtpVerifyComponent] Starting resend timer"),this.isResendDisabled=!0,this.resendTimer=60,this.timerSubscription?.unsubscribe(),this.timerSubscription=(0,j.Y)(1e3).subscribe(()=>{this.resendTimer--,this.logger.debug("[OtpVerifyComponent] Resend timer:",this.resendTimer),this.resendTimer<=0&&(this.isResendDisabled=!1,this.logger.info("[OtpVerifyComponent] Resend timer completed"),this.timerSubscription?.unsubscribe())})}ngOnDestroy(){this.logger.info("[OtpVerifyComponent] Component destroyed"),this.timerSubscription?.unsubscribe()}verifyOtp(n){this.logger.info("[OtpVerifyComponent] Verifying OTP:",n);const i={otp:Number(n)};this.httpService.submitPhoneOtp(i).subscribe(t=>{this.logger.info("[OtpVerifyComponent] OTP verification API response:",t),202===t.status_code?(this.logger.info("[OtpVerifyComponent] OTP verified successfully"),this.dialogRef.close(t)):(this.logger.warn("[OtpVerifyComponent] OTP verification failed with status code:",t.status_code),this.toastify.showError("OTP verification failed"))},t=>{this.logger.error("[OtpVerifyComponent] Error verifying OTP:",t),this.toastify.showError("Failed to verify OTP")})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(d.CP),e.rXU(v.k),e.rXU(w.g),e.rXU(F.J),e.rXU(d.Vh))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-otp-verify"]],standalone:!0,features:[e.aNF],decls:21,vars:11,consts:[[1,"justify-content-center","align-items-center"],[1,"position-relative","w-100","h-100","bg-gredient","justify-content-center"],[1,"d-flex","align-items-center"],[1,"mat-mdc-card","mdc-card","cardWithShadow","boxed-auth"],[1,"mat-mdc-card-content"],[1,"text-center"],[1,"f-s-14","m-t-30"],[1,"f-w-600","m-t-10"],[1,"m-t-30","p-t-20",3,"formGroup"],[1,"f-s-14","f-w-600","d-block","m-b-12","text-center"],[1,"otp-wrapper","text-center"],["formControlName","otp",3,"config"],[1,"text-center","mt-4","resend-wrapper"],[1,"f-s-14","f-w-500"],[1,"text-primary","text-decoration-none","f-w-500",2,"cursor","pointer",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"p",6),e.EFF(7),e.k0s(),e.j41(8,"p",7),e.EFF(9),e.k0s()(),e.j41(10,"div")(11,"form",8)(12,"label",9),e.EFF(13),e.k0s(),e.j41(14,"div",10),e.nrm(15,"ng-otp-input",11),e.k0s()(),e.j41(16,"div",12)(17,"span",13),e.EFF(18," Didn\u2019t get the code? "),e.j41(19,"a",14),e.bIt("click",function(){return!t.isResendDisabled&&t.onResendClick()}),e.EFF(20),e.k0s()()()()()()()()()),2&i&&(e.R7$(7),e.SpI(" We've sent a ",t.length,"-digit verification code to your mobile number. "),e.R7$(2),e.JRh(t.phoneHint),e.R7$(2),e.Y8G("formGroup",t.otpForm),e.R7$(2),e.SpI(" Enter your ",t.length,"-digit code "),e.R7$(2),e.Y8G("config",t.config),e.R7$(4),e.xc7("pointer-events",t.isResendDisabled?"none":"auto"),e.AVh("disabled",t.isResendDisabled),e.BMQ("aria-disabled",t.isResendDisabled),e.R7$(),e.SpI(" Resend ",t.isResendDisabled?"("+t.resendTimer+"s)":""," "))},dependencies:[c.MD,m.G,h.RN,h.m2,s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,E],styles:[".boxed-auth[_ngcontent-%COMP%]{width:100%;max-width:480px;margin:0 auto}.custom-row.row[_ngcontent-%COMP%]{margin-right:-8px;margin-left:-8px}.otp-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:24px 0;padding:0 16px}.otp-wrapper[_ngcontent-%COMP%]   .custom-otp-container[_ngcontent-%COMP%]{justify-content:center;gap:10px}.otp-wrapper[_ngcontent-%COMP%]   .custom-otp-input[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;border-radius:4px;text-align:center;border:1px solid #ccc}.verify-btn[_ngcontent-%COMP%]{width:100%}.resend-wrapper[_ngcontent-%COMP%]{padding-top:12px}.otp-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:24px}.resend-wrapper[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{color:gray!important;text-decoration:none;cursor:not-allowed}.aadhaar-edit-row[_ngcontent-%COMP%]{display:flex;align-items:center}.aadhaar-edit-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}"]})}}return r})();var J=p(467),N=p(8395);let G=(()=>{class r{constructor(n,i,t,o,a){this.toastify=n,this.logger=i,this.httpService=t,this.utilityService=o,this.dialogRef=a}ngOnInit(){this.ekycRedirect()}ekycRedirect(){this.logger.info("Initiating Ekyc:"),this.httpService.fetchKycUrl().subscribe(n=>{this.ekycUrl=n.signing_url,this.logger.info("Ekyc response:",n),this.toastify.showSuccess(n.message)},n=>{this.logger.error("Error In Ekyc:",n),this.toastify.showError("Failed to Ekyc")})}redirect(){this.logger.info("Initiating Ekyc redirection:"),window.open(this.ekycUrl,"_blank")}retry(){var n=this;return(0,J.A)(function*(){yield n.ekycRedirect(),n.ekycUrl&&n.redirect()})()}submit(n){this.logger.info("[ekycComponent] esign Dialog opened");let i={isProcessCompleted:n};console.log(i),1==n?this.httpService.updateEsignStatus(i).subscribe(t=>{this.logger.info("[ekycComponent] esign Api Success:",t),202==t.status_code&&(this.logger.info("[ekycComponent] esign dialog closed with:",n),this.dialogRef.close(n))},t=>{this.logger.error("[ekycComponent] Error while esign status submission :",t),this.toastify.showError("Error while esign status submission")}):(this.logger.info("[ekycComponent] esign dialog closed with:",n),this.dialogRef.close(n))}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(F.J),e.rXU(w.g),e.rXU(v.k),e.rXU(N.Q),e.rXU(d.CP))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-ekyc"]],standalone:!0,features:[e.aNF],decls:18,vars:0,consts:[["mat-dialog-title","",1,"mat-subtitle-1"],["mat-dialog-content","",1,"f-s-14","lh-16"],["align","center",1,"m-t-10"],["mat-flat-button","","color","primary","type","button",1,"m-r-8",3,"click"],["mat-stroked-button","","color","warn","type","button",3,"click"],["align","end",1,"p-24","p-t-0"],["mat-flat-button","",1,"bg-error","text-white",3,"click"],["mat-flat-button","","cdkFocusInitial","","color","primary",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"h5",0),e.EFF(1,"Esign verification"),e.k0s(),e.j41(2,"div",1),e.EFF(3," Would you like to start your Esign verification process? "),e.j41(4,"div",2)(5,"button",3),e.bIt("click",function(){return t.redirect()}),e.EFF(6,"Esign"),e.k0s(),e.j41(7,"button",4),e.bIt("click",function(){return t.retry()}),e.EFF(8,"Retry"),e.k0s()(),e.j41(9,"p")(10,"b"),e.EFF(11,"Note:"),e.k0s(),e.EFF(12," Clicking these buttons will redirect you to an external URL to complete your KYC process. Once the KYC is completed on the external portal, please return to this page and click the appropriate button below to proceed."),e.k0s(),e.j41(13,"mat-dialog-actions",5)(14,"button",6),e.bIt("click",function(){return t.submit(!1)}),e.EFF(15," Skip "),e.k0s(),e.j41(16,"button",7),e.bIt("click",function(){return t.submit(!0)}),e.EFF(17,"Completed Esign"),e.k0s()()())},dependencies:[m.G,I.$z,d.BI,d.E7,d.Yi,s.X1,I.Hl]})}}return r})();var L=p(4796),z=p(2168),H=p(345),W=p(4823),Q=p(4912);const Z=["kycCard"];function q(r,l){1&r&&(e.j41(0,"div",47)(1,"div",48),e.EFF(2," Your Esign is pending verification. "),e.k0s()())}function ee(r,l){1&r&&(e.j41(0,"div",47)(1,"div",48),e.EFF(2," Your KYC verification is pending verification. "),e.k0s()())}function te(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Email is required."),e.k0s())}function ne(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter a valid email (Ex: abc@xyz.com)."),e.k0s())}function ie(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter phone(Required)."),e.k0s())}function oe(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter valid phone number. "),e.k0s())}function re(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Phone number too long (Maxx 10 Digits)."),e.k0s())}function se(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Phone number too short (Min 10 Digits). "),e.k0s())}function le(r,l){if(1&r){const n=e.RV6();e.j41(0,"div",49)(1,"button",50),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.generatePhoneOtp())}),e.EFF(2),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(),e.Y8G("color",n.isPhoneVerified?"primary":"warn")("disabled",n.isPhoneVerified),e.R7$(),e.SpI(" ",n.isPhoneVerified?"Verified":"Verify"," ")}}function ae(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"New Password is Required"),e.k0s())}function pe(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Confirm Password is Required"),e.k0s())}function ce(r,l){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Password "),e.j41(2,"strong"),e.EFF(3,"mismatch"),e.k0s()())}function fe(r,l){if(1&r){const n=e.RV6();e.j41(0,"i-tabler",51),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.downloadPDF(null==t.profileInfo?null:t.profileInfo.esign_doc,"esignDoc"))}),e.k0s()}}function de(r,l){if(1&r){const n=e.RV6();e.j41(0,"a",52),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.openEsignDialog())}),e.EFF(1," Verify "),e.k0s()}if(2&r){const n=e.XpG();e.Y8G("ngClass",null!=n.profileInfo&&n.profileInfo.esign_status&&null!=n.profileInfo&&n.profileInfo.step4?"text-success":"text-error ")}}function ue(r,l){if(1&r){const n=e.RV6();e.j41(0,"i-tabler",51),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.downloadPDF(null==t.profileInfo?null:t.profileInfo.kyc_doc,"kyc_doc"))}),e.k0s()}}function he(r,l){if(1&r){const n=e.RV6();e.j41(0,"a",53),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.fetchAadhaar())}),e.EFF(1," Verify "),e.k0s()}if(2&r){const n=e.XpG();e.Y8G("ngClass",null!=n.profileInfo&&n.profileInfo.step5&&null!=n.profileInfo&&n.profileInfo.kyc_status?"text-success":"text-error")}}const me=[{path:"",children:[{path:"",component:(()=>{class r{constructor(n,i,t,o,a,f,ge,be){this.authService=n,this.toastify=i,this.logger=t,this.utilityService=o,this.dialog=a,this.httpService=f,this.router=ge,this.sanitizer=be,this.isEmailVerified=!0,this.showKycMsg=!1,this.showEsignMsg=!1,this.user=null,this.imagePreview=null,this.selectedFile=null,this.checklistItems=[{name:"",value:"",icon:""},"KYC Information","MITC Status","First Payment","Esign Doc","KYC"],this.logger.info("[ProfileComponent] Initializing ProfileComponent"),this.profileForm=new s.gE({name:new s.MJ({value:"",disabled:!0}),phone:new s.MJ("",[s.k0.required,s.k0.maxLength(10),s.k0.minLength(10),s.k0.pattern("^[+0-9]*$")]),email:new s.MJ({value:"",disabled:!0},[s.k0.required,s.k0.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])}),this.passwordForm=new s.gE({currentPassword:new s.MJ("",s.k0.required),newPassword:new s.MJ("",[s.k0.required]),confirmPassword:new s.MJ("",[s.k0.required])})}hasError(n,i,t){const o=n.get(i),a=o?.hasError(t)&&o.touched;return a&&this.logger.warn(`[ProfileComponent] Validation error on ${i}: ${t}`),a}ngOnInit(){this.logger.info("[ProfileComponent] ngOnInit called"),this.getProfileInfo(),this.user=this.authService.getUser(),this.logger.debug("[ProfileComponent] User data loaded:",this.user)}focusIfConditionFails(){this.kycCardRef.nativeElement.scrollIntoView({behavior:"smooth",block:"center"})}onSubmit(){try{if(this.logger.info("[ProfileComponent] Submitting password change"),this.passwordForm.valid){const n={password1:this.passwordForm.value.newPassword,password2:this.passwordForm.value.confirmPassword};this.authService.updatePassword(n.password1,n.password2).subscribe(i=>{this.logger.info("[ProfileComponent] Password updated successfully:",i),this.toastify.showSuccess(i?.message||"Password updated successfully!"),this.utilityService.navigateTo("/")},i=>{this.logger.error("[ProfileComponent] Error changing password:",i),this.toastify.showError(i.error?.message||"Failed to update password. Please try again.")})}else this.logger.warn("[ProfileComponent] Password form is invalid"),this.toastify.showError("Please fill in all fields correctly.")}catch(n){this.logger.error("[ProfileComponent] Unexpected error during password submission:",n),this.toastify.showError("An unexpected error occurred. Please try again later.")}}onFileSelected(n){const i=n.target.files?.[0];if(!i)return void this.logger.warn("[ProfileComponent] No file selected");if(!["image/jpeg","image/png"].includes(i.type))return this.logger.error(`[ProfileComponent] Invalid file type: ${i.type}`),void this.toastify.showError("Invalid file type! Please upload a JPG or PNG image.");if(i.size>819200)return this.logger.error("[ProfileComponent] File size exceeds the 800KB limit"),void this.toastify.showError("File size too large! Maximum allowed size is 800KB.");this.selectedFile=i;const o=new FileReader;o.onload=()=>{this.imagePreview=o.result,this.logger.info("[ProfileComponent] Image preview updated successfully")},o.readAsDataURL(i)}onResetImage(){this.logger.info("[ProfileComponent] Resetting profile image"),this.imagePreview=null,this.selectedFile=null}onUpdateProfile(){this.logger.info("[ProfileComponent] Submitting profile update");const n=this.imagePreview,t={email_address:this.profileForm.getRawValue().email,avatar:n};this.logger.debug("[ProfileComponent] Profile update payload:",t),this.authService.updateProfile(t).subscribe(o=>{this.getProfileInfo(),this.logger.info("[ProfileComponent] Profile updated successfully:",{message:o.message}),this.toastify.showSuccess(o.message)},o=>{this.logger.error("[ProfileComponent] Error updating profile:",o),this.toastify.showError("Failed to update profile")})}fetchAadhaar(){this.logger.info("[ProfileComponent] Fetching Aadhaar"),this.httpService.fetchAadhaar().subscribe(n=>{this.logger.info("[ProfileComponent] Aadhaar fetched successfully:",n),202==n.status_code&&this.openOtpDialog(n.aadhar_number)},n=>{this.logger.error("[ProfileComponent] Error fetching Aadhaar:",n),this.toastify.showError("Error in Aadhaar fetching")})}openOtpDialog(n){this.logger.info("[ProfileComponent] Opening OTP dialog for Aadhaar:",n),this.dialog.open(A,{width:"400px",data:{length:6,phoneHint:"******1234",aadhaar:n},disableClose:!1}).afterClosed().subscribe(t=>{t&&(this.logger.info("[ProfileComponent] OTP verified successfully:",t),this.getProfileInfo(),this.toastify.showSuccess("OTP Verified!"))})}getProfileInfo(){this.logger.info("[ProfileComponent] Fetching profile information"),this.httpService.getProfile().subscribe(n=>{this.logger.info("[ProfileComponent] Profile information fetched successfully:",n.info),this.updateLocalStorage(n.info),this.profileInfo=n.info,this.profileInfo?.profile_phone&&""!==this.profileInfo?.profile_phone.trim()&&(console.log("Phone number is not empty:",this.profileInfo.profile_phone),this.profileForm.valueChanges.subscribe(o=>{this.logger.info("[ProfileComponent] profileForm.valueChanges:",o);let a=this.profileInfo?.profile_phone?this.profileInfo.profile_phone.replace(/^\+91/,"").trim():"";o.phone!==a?(this.logger.info("[ProfileComponent] Phone Changed:",o),this.isPhoneVerified=!1):(this.logger.info("[ProfileComponent] Phone Same:",o),this.isPhoneVerified=!0)})),this.isPhoneVerified=this.profileInfo?.profile_phone_verified;let i=this.profileInfo?.profile_phone?this.profileInfo.profile_phone.replace(/^\+91/,"").trim():"",t=`${this.profileInfo?.profile_first_name||""} ${this.profileInfo?.profile_last_name||""}`.trim();this.profileForm.patchValue({phone:i,email:this.profileInfo?.profile_email,name:t}),this.profileInfo.avatar=this.getAvatar(this.profileInfo),this.focusIfConditionFails(),setTimeout(()=>{this.profileInfo.step1&&this.profileInfo.step2&&this.profileInfo.step3?(this.logger.info("[ProfileComponent] this.profileInfo.step1 && this.profileInfo.step2 && this.profileInfo.step3:",this.profileInfo.step1&&this.profileInfo.step2&&this.profileInfo.step3),this.profileInfo?.esign_status?this.profileInfo?.kyc_status?this.logger.info("No action 1"):(this.showKycMsg=!0,this.logger.info("[ProfileComponent] Open Kyc Dialog",!this.profileInfo?.kyc_status),this.fetchAadhaar()):(this.showEsignMsg=!0,this.logger.info("[ProfileComponent] Open E sign Dialog",!this.profileInfo?.esign_status),this.openEsignDialog())):this.logger.info("No action 2")},500)},n=>{this.logger.error("[ProfileComponent] Error fetching profile information:",n),this.toastify.showError("Failed to fetch personal information")})}updateLocalStorage(n){this.authService.setUser({username:n?.profile_username,first_name:n?.profile_first_name,last_name:n?.profile_last_name,email:n?.profile_email,phone:n?.profile_phone,phone_verified:n?.profile_phone_verified,image:n?.profile_image,package_code:n?.package_code,monthly:n?.monthly,yearly:n?.yearly})}generatePhoneOtp(){this.logger.info("[ProfileComponent] OTP Generation Started");let n={phone:"+91"+this.profileForm.value.phone.trim()};this.httpService.getOtp(n).subscribe(i=>{this.logger.info("[ProfileComponent] OTP Generated successfully:",i),202==i.status_code&&this.openPhoneOtpDialog(n.phone)},i=>{this.logger.error("[ProfileComponent] Error OTP Generation:",i),this.toastify.showError("Error OTP Generation")})}openPhoneOtpDialog(n){this.logger.info("[ProfileComponent] Opening OTP dialog for Phone:",n),this.dialog.open(K,{width:"400px",data:{length:6,phoneHint:this.maskPhone(n)},disableClose:!1}).afterClosed().subscribe(t=>{t&&(this.logger.info("[ProfileComponent] OTP verified successfully:",t),this.getProfileInfo(),this.toastify.showSuccess("OTP Verified!"))})}maskPhone(n){return n.length<4?n:n.substring(0,2)+"******"+n.substring(n.length-2)}downloadPDF(n,i){if(!n)return void this.logger.error("[ProfileComponent] No document available");const t=`data:application/pdf;base64,${n}`,o=document.createElement("a"),a="esignDoc"==i?this.profileInfo.name+" eSign Document.pdf":this.profileInfo.name+" kyc Document.pdf";o.href=t,o.download=a,o.click()}getAvatar(n){return n?.profile_image?.trim()?this.sanitizer.bypassSecurityTrustResourceUrl(`data:image/png;base64, ${n.profile_image}`):this.sanitizer.bypassSecurityTrustResourceUrl(`https://ui-avatars.com/api/?name=${encodeURIComponent(`${n?.profile_first_name||""} ${n?.profile_last_name||""}`)}&background=random`)}openEsignDialog(){this.logger.info("[ProfileComponent] Opening EkycComponent dialog for Kyc:"),this.dialog.open(G,{width:"500px",data:{},disableClose:!1}).afterClosed().subscribe(i=>{!1!==i?(this.logger.info("[ProfileComponent] esign dialog closed with:",i),this.getProfileInfo()):this.logger.info("[ProfileComponent] esign dialog closed with:",i)})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(L.u),e.rXU(F.J),e.rXU(w.g),e.rXU(N.Q),e.rXU(d.bZ),e.rXU(v.k),e.rXU(z.Ix),e.rXU(H.up))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-profile"]],viewQuery:function(i,t){if(1&i&&e.GBs(Z,5),2&i){let o;e.mGM(o=e.lsd())&&(t.kycCardRef=o.first)}},standalone:!0,features:[e.aNF],decls:125,vars:42,consts:[["fileInput",""],["tooltip","matTooltip"],["kycCard",""],["class","p-24 rounded bg-error m-t-16",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"mat-mdc-card","mdc-card","cardWithShadow"],[1,"mat-mdc-card-content","p-y-24"],[1,"col-sm-6","text-center"],[1,"m-t-24"],["width","140","height","140",1,"rounded-circle",3,"src"],["type","file","hidden","",3,"change"],["mat-flat-button","","color","primary",1,"m-r-8",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[1,"f-s-14","m-t-24","d-block"],[1,"col-sm-6"],[1,"p-t-32",3,"formGroup"],[1,"col-md-12"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","name","type","text"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],["matSuffix",""],["matTooltipPosition","above","matTooltipHideDelay","100000",1,"m-l-8",3,"name","ngClass","matTooltip"],[3,"ngClass"],["matInput","","formControlName","phone","type","phone"],["class","col-md-2",4,"ngIf"],[1,"text-right","p-24","p-t-0"],["mat-flat-button","","color","primary","type","submit",1,"m-r-8",3,"click"],["mat-stroked-button","","color","warn","type","button",1,"m-r-8"],[1,"m-t-24",3,"ngSubmit","formGroup"],["matInput","","formControlName","currentPassword","type","password","placeholder","Enter current password"],["matInput","","formControlName","newPassword","type","password","placeholder","Enter new password"],["matInput","","formControlName","confirmPassword","type","password","placeholder","Confirm your new password"],[1,"text-right","p-t-0"],["mat-raised-button","","color","primary",3,"disabled"],[1,"col-sm-6","col-lg-3"],[1,"mat-mdc-card","mdc-card","cardWithShadow","fixed-height-card","d-flex","flex-column","flex-grow-1"],[1,"mat-mdc-card-content","p-y-24","d-flex","flex-column","flex-grow-1"],[1,"d-flex","align-items-center","flex-grow-1"],[1,"icon-23","m-r-12","d-flex",3,"name","ngClass"],[1,"f-w-500","f-s-14",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-between","flex-grow-1"],[1,"d-flex","align-items-center"],["name","file-type-pdf","class","icon-23 m-r-12 text-success d-flex cursor-pointer",3,"click",4,"ngIf"],["href","javascript:void(0);",3,"ngClass","click",4,"ngIf"],["href","javascript:void(0);","class","f-w-500 f-s-14 cursor-pointer",3,"ngClass","click",4,"ngIf"],[1,"p-24","rounded","bg-error","m-t-16"],[1,"f-w-600","f-s-14"],[1,"col-md-2"],["mat-flat-button","","type","button",1,"m-l-8",3,"click","color","disabled"],["name","file-type-pdf",1,"icon-23","m-r-12","text-success","d-flex","cursor-pointer",3,"click"],["href","javascript:void(0);",3,"click","ngClass"],["href","javascript:void(0);",1,"f-w-500","f-s-14","cursor-pointer",3,"click","ngClass"]],template:function(i,t){if(1&i){const o=e.RV6();e.j41(0,"div"),e.nrm(1,"app-breadcrumb"),e.j41(2,"div"),e.DNE(3,q,3,0,"div",3)(4,ee,3,0,"div",3),e.j41(5,"div",4)(6,"div",5)(7,"mat-card",6)(8,"mat-card-content",7)(9,"div",4)(10,"div",8)(11,"mat-card-title"),e.EFF(12,"Change Profile"),e.k0s(),e.j41(13,"mat-card-subtitle"),e.EFF(14,"Change your profile picture from here"),e.k0s(),e.j41(15,"div",9),e.nrm(16,"img",10),e.k0s(),e.j41(17,"div",9)(18,"input",11,0),e.bIt("change",function(f){return e.eBV(o),e.Njj(t.onFileSelected(f))}),e.k0s(),e.j41(20,"button",12),e.bIt("click",function(){e.eBV(o);const f=e.sdS(19);return e.Njj(f.click())}),e.EFF(21,"Upload"),e.k0s(),e.j41(22,"button",13),e.bIt("click",function(){return e.eBV(o),e.Njj(t.onResetImage())}),e.EFF(23,"Reset"),e.k0s()(),e.j41(24,"span",14),e.EFF(25,"Allowed JPG or PNG."),e.k0s()(),e.j41(26,"div",15)(27,"mat-card-title"),e.EFF(28,"Communication Details"),e.k0s(),e.j41(29,"mat-card-subtitle"),e.EFF(30,"Need to update your contact info? Just edit and save it here."),e.k0s(),e.j41(31,"form",16)(32,"div",4)(33,"div",17)(34,"mat-form-field",18)(35,"mat-label"),e.EFF(36,"Name"),e.k0s(),e.nrm(37,"input",19),e.k0s()(),e.j41(38,"div",17)(39,"mat-form-field",18)(40,"mat-label"),e.EFF(41,"Email"),e.k0s(),e.nrm(42,"input",20),e.DNE(43,te,2,0,"mat-error",21)(44,ne,2,0,"mat-error",21),e.j41(45,"mat-icon",22),e.nrm(46,"i-tabler",23,1),e.k0s()()(),e.j41(48,"div",24)(49,"mat-form-field",18)(50,"mat-label"),e.EFF(51,"Phone"),e.k0s(),e.nrm(52,"input",25),e.DNE(53,ie,2,0,"mat-error",21)(54,oe,2,0,"mat-error",21)(55,re,2,0,"mat-error",21)(56,se,2,0,"mat-error",21),e.j41(57,"mat-icon",22),e.nrm(58,"i-tabler",23,1),e.k0s()()(),e.DNE(60,le,3,3,"div",26),e.k0s()()()()(),e.j41(61,"div",27)(62,"button",28),e.bIt("click",function(){return e.eBV(o),e.Njj(t.onUpdateProfile())}),e.EFF(63,"Save"),e.k0s(),e.j41(64,"button",29),e.EFF(65,"Cancel"),e.k0s()()()(),e.j41(66,"div",15)(67,"mat-card",6)(68,"mat-card-content",7)(69,"mat-card-title"),e.EFF(70,"Change Password"),e.k0s(),e.j41(71,"mat-card-subtitle"),e.EFF(72,"To change your password, please confirm here"),e.k0s(),e.j41(73,"form",30),e.bIt("ngSubmit",function(){return e.eBV(o),e.Njj(t.onSubmit())}),e.j41(74,"mat-form-field",18)(75,"mat-label"),e.EFF(76,"Current Password"),e.k0s(),e.nrm(77,"input",31),e.k0s(),e.j41(78,"mat-form-field",18)(79,"mat-label"),e.EFF(80,"New Password"),e.k0s(),e.nrm(81,"input",32),e.DNE(82,ae,2,0,"mat-error",21),e.k0s(),e.j41(83,"mat-form-field",18)(84,"mat-label"),e.EFF(85,"Confirm Password"),e.k0s(),e.nrm(86,"input",33),e.DNE(87,pe,2,0,"mat-error",21),e.k0s(),e.j41(88,"div"),e.DNE(89,ce,4,0,"mat-error",21),e.k0s(),e.j41(90,"div",34)(91,"button",35),e.EFF(92,"Change Password"),e.k0s()()()()()(),e.j41(93,"div",36,2)(95,"mat-card",37)(96,"mat-card-content",38)(97,"div",39),e.nrm(98,"i-tabler",40),e.j41(99,"span",41),e.EFF(100,"KYC Information"),e.k0s()(),e.j41(101,"div",39),e.nrm(102,"i-tabler",40),e.j41(103,"span",41),e.EFF(104," MITC Status"),e.k0s()(),e.j41(105,"div",39),e.nrm(106,"i-tabler",40),e.j41(107,"span",41),e.EFF(108," First Payment"),e.k0s()(),e.j41(109,"div",42)(110,"div",43),e.nrm(111,"i-tabler",40),e.j41(112,"span",41),e.EFF(113,"Esign Doc"),e.k0s()(),e.j41(114,"div",43),e.DNE(115,fe,1,0,"i-tabler",44)(116,de,2,1,"a",45),e.k0s()(),e.j41(117,"div",42)(118,"div",43),e.nrm(119,"i-tabler",40),e.j41(120,"span",41),e.EFF(121,"KYC"),e.k0s()(),e.j41(122,"div",43),e.DNE(123,ue,1,0,"i-tabler",44)(124,he,2,1,"a",46),e.k0s()()()()()()()()}2&i&&(e.R7$(3),e.Y8G("ngIf",t.showEsignMsg),e.R7$(),e.Y8G("ngIf",t.showKycMsg),e.R7$(12),e.Y8G("src",t.imagePreview||(null==t.profileInfo?null:t.profileInfo.avatar),e.B4B),e.R7$(15),e.Y8G("formGroup",t.profileForm),e.R7$(12),e.Y8G("ngIf",t.hasError(t.profileForm,"email","required")),e.R7$(),e.Y8G("ngIf",t.hasError(t.profileForm,"email","pattern")),e.R7$(2),e.Y8G("name",t.isEmailVerified?"circle-check":"circle-x")("ngClass",t.isEmailVerified?"text-success":"text-error ")("matTooltip",t.isEmailVerified?"Verified":"Unverified "),e.R7$(2),e.Y8G("ngClass",t.isPhoneVerified?"col-md-12":"col-md-10"),e.R7$(5),e.Y8G("ngIf",t.hasError(t.profileForm,"phone","required")),e.R7$(),e.Y8G("ngIf",t.hasError(t.profileForm,"phone","pattern")),e.R7$(),e.Y8G("ngIf",t.hasError(t.profileForm,"phone","maxlength")),e.R7$(),e.Y8G("ngIf",t.hasError(t.profileForm,"phone","minlength")),e.R7$(2),e.Y8G("name",t.isPhoneVerified?"circle-check":"circle-x")("ngClass",t.isPhoneVerified?"text-success":"text-error ")("matTooltip",t.isPhoneVerified?"Verified":"Unverified "),e.R7$(2),e.Y8G("ngIf",!t.isPhoneVerified),e.R7$(13),e.Y8G("formGroup",t.passwordForm),e.R7$(9),e.Y8G("ngIf",t.hasError(t.passwordForm,"newPassword","required")),e.R7$(5),e.Y8G("ngIf",t.hasError(t.passwordForm,"confirmPassword","required")),e.R7$(2),e.Y8G("ngIf",""!=t.passwordForm.value.newPassword&&t.passwordForm.value.newPassword!=t.passwordForm.value.confirmPassword),e.R7$(2),e.Y8G("disabled",t.passwordForm.invalid),e.R7$(7),e.Y8G("name",null!=t.profileInfo&&t.profileInfo.isPanValid&&null!=t.profileInfo&&t.profileInfo.verified&&null!=t.profileInfo&&t.profileInfo.step1?"check":"circle-x")("ngClass",null!=t.profileInfo&&t.profileInfo.isPanValid&&null!=t.profileInfo&&t.profileInfo.verified&&null!=t.profileInfo&&t.profileInfo.step1?"text-success":"text-error "),e.R7$(),e.Y8G("ngClass",null!=t.profileInfo&&t.profileInfo.isPanValid&&null!=t.profileInfo&&t.profileInfo.verified&&null!=t.profileInfo&&t.profileInfo.step1?"":"text-error "),e.R7$(3),e.Y8G("name",null!=t.profileInfo&&t.profileInfo.step2?"check":"circle-x")("ngClass",null!=t.profileInfo&&t.profileInfo.step2?"text-success":"text-error "),e.R7$(),e.Y8G("ngClass",null!=t.profileInfo&&t.profileInfo.step2?"":"text-error "),e.R7$(3),e.Y8G("name",null!=t.profileInfo&&t.profileInfo.step3?"check":"circle-x")("ngClass",null!=t.profileInfo&&t.profileInfo.step3?"text-success":"text-error "),e.R7$(),e.Y8G("ngClass",null!=t.profileInfo&&t.profileInfo.step3?"":"text-error "),e.R7$(4),e.Y8G("name",null!=t.profileInfo&&t.profileInfo.step5&&null!=t.profileInfo&&t.profileInfo.kyc_status?"check":"circle-x")("ngClass",null!=t.profileInfo&&t.profileInfo.esign_status&&null!=t.profileInfo&&t.profileInfo.step4?"text-success":"text-error "),e.R7$(),e.Y8G("ngClass",null!=t.profileInfo&&t.profileInfo.esign_status&&null!=t.profileInfo&&t.profileInfo.step4?"":"text-error "),e.R7$(3),e.Y8G("ngIf",(null==t.profileInfo?null:t.profileInfo.esign_status)&&(null==t.profileInfo?null:t.profileInfo.step4)),e.R7$(),e.Y8G("ngIf",!(null!=t.profileInfo&&t.profileInfo.esign_status||null!=t.profileInfo&&t.profileInfo.step4)),e.R7$(3),e.Y8G("name",null!=t.profileInfo&&t.profileInfo.step5&&null!=t.profileInfo&&t.profileInfo.kyc_status?"check":"circle-x")("ngClass",null!=t.profileInfo&&t.profileInfo.step5&&null!=t.profileInfo&&t.profileInfo.kyc_status?"text-success":"text-error"),e.R7$(),e.Y8G("ngClass",null!=t.profileInfo&&t.profileInfo.step5&&null!=t.profileInfo&&t.profileInfo.kyc_status?"":"text-error"),e.R7$(3),e.Y8G("ngIf",(null==t.profileInfo?null:t.profileInfo.step5)&&(null==t.profileInfo?null:t.profileInfo.kyc_status)),e.R7$(),e.Y8G("ngIf",!(null!=t.profileInfo&&t.profileInfo.step5||null!=t.profileInfo&&t.profileInfo.kyc_status)))},dependencies:[m.G,b.rl,b.nJ,b.TL,b.yw,V.fg,h.RN,h.m2,h.Lc,h.dh,I.$z,M.An,W.oV,Q.Jc,c.YU,c.bT,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,k.D],styles:[".button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:1rem}.plan-title[_ngcontent-%COMP%]{font-size:38px;margin-top:40px;line-height:50px;font-weight:600}.per-month[_ngcontent-%COMP%]{margin-top:45px;margin-left:12px}.popular-badge[_ngcontent-%COMP%]{position:absolute;right:16px}.fixed-height-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.toggle[_ngcontent-%COMP%]{color:#000;display:flex;align-items:center}.toggle-btn[_ngcontent-%COMP%]{margin:0 1rem}.checkbox[_ngcontent-%COMP%]{display:none}.sub[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a3a8f0,#696fdd);display:flex;justify-content:flex-start;align-items:center;height:1.6rem;width:3.3rem;border-radius:1.6rem;padding:.3rem}.circle[_ngcontent-%COMP%]{background-color:#fff;height:1.4rem;width:1.4rem;border-radius:50%}.checkbox[_ngcontent-%COMP%]:checked + .sub[_ngcontent-%COMP%]{justify-content:flex-end}.selected-plan[_ngcontent-%COMP%]{background:beige;border:2px solid #4caf50;box-shadow:0 4px 10px #4caf504d;transform:scale(1.05);transition:all .3s ease-in-out}.selected-plan[_ngcontent-%COMP%]   .plan-title[_ngcontent-%COMP%]{color:#4caf50}"]})}}return r})(),data:{title:"Account",description:"Update your profile and account settings",parent:"Dashboard",child:"Profile"}},{path:"kyc",component:G,data:{title:"Account",description:"Know Your Customer",parent:"Dashboard",child:"Esign"}}]}]}}]);